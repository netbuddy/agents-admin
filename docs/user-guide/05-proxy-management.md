# 代理管理

> 本文介绍如何配置网络代理，以便 Agent 容器访问外网。

## 概述

许多 Agent（如 Gemini CLI、Claude Code）需要访问外网 API。如果你的网络环境需要代理，可以在系统中配置代理并应用到节点。

## 查看代理列表

1. 点击左侧导航栏的 **「代理管理」**
2. 页面显示所有已配置的代理
3. 每个代理卡片显示：名称、类型、地址、端口、是否默认

## 创建代理

### 操作步骤

1. 在代理管理页面，点击 **「添加代理」**
2. 填写以下信息：

| 字段 | 必填 | 说明 |
|------|------|------|
| **名称** | 是 | 代理的显示名称 |
| **类型** | 是 | `http` / `https` / `socks5` |
| **主机地址** | 是 | 代理服务器 IP 或域名 |
| **端口** | 是 | 代理服务器端口 |
| **用户名** | 否 | 认证用户名 |
| **密码** | 否 | 认证密码 |
| **No Proxy** | 否 | 不走代理的地址列表（逗号分隔） |
| **设为默认** | 否 | 是否设为默认代理 |

3. 点击 **「创建」**

## 测试代理

1. 在代理卡片上点击 **「测试」** 按钮
2. 系统会通过该代理发起测试请求
3. 显示测试结果（成功/失败及响应时间）

## 设置默认代理

1. 在代理卡片上点击 **「设为默认」**
2. 默认代理会自动应用到新创建的节点环境配置
3. 只能有一个默认代理

### 清除默认代理

1. 点击 **「清除默认」** 按钮
2. 取消当前默认代理设置

## 编辑代理

1. 在代理卡片上点击 **编辑按钮**
2. 修改代理信息
3. 点击 **「保存」**

## 删除代理

1. 在代理卡片上点击 **删除按钮**
2. 确认删除
3. **注意**：如果该代理正在被节点使用，删除后节点需要重新配置

## API 参考

| 操作 | 方法 | 路径 |
|------|------|------|
| 列出代理 | GET | `/api/v1/proxies` |
| 创建代理 | POST | `/api/v1/proxies` |
| 获取代理 | GET | `/api/v1/proxies/{id}` |
| 更新代理 | PUT | `/api/v1/proxies/{id}` |
| 删除代理 | DELETE | `/api/v1/proxies/{id}` |
| 测试代理 | POST | `/api/v1/proxies/{id}/test` |
| 设为默认 | POST | `/api/v1/proxies/{id}/set-default` |
| 清除默认 | POST | `/api/v1/proxies/clear-default` |
